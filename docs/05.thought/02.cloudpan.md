---
title: MinimalistCloudPanæç®€äº‘ç›˜
date: 2024-08-30 15:45:24
permalink: /pages/599983/
sidebar: false
author: 
  name: Cola
  link: https://the0n3.top
---
# æç®€äº‘ç›˜

ä¸€ä¸ªphpç½‘ç›˜ç®¡ç†é¡¹ç›®(nas)ï¼Œå·²é¸½ã€‚

ç¼–å†™è¯­è¨€ï¼šPHP

| è´¡çŒ®è€… | æˆ‘   | chatGPT |
| ------ | ---- | ------- |
|        | 5%   | 95%     |

é€‚ç”¨åœºæ™¯ï¼šå±€åŸŸç½‘

æµ‹è¯•ï¼šå½“å‰ä»…æµ‹è¯•äº†linux

æ¼æ´åŠå®‰å…¨é—®é¢˜ï¼šæœªçŸ¥ï¼Œå¾ˆå¯èƒ½å­˜åœ¨æ¼æ´ï¼Œå»ºè®®å±€åŸŸç½‘ä¸‹è‡ªå·±ç©ç©

å…¶ä»–ï¼šå±€åŸŸç½‘å…±äº«æ–‡ä»¶å¤¹ä¼¼ä¹æ¯”è¿™ä¸ªæ–¹æ¡ˆå¥½ä¸€äº›ï¼ŸğŸ¤

æƒ³æ³•ï¼šä¸€ä¸ªäºŒæ‰‹éšèº«wifiåˆ·armbianï¼ŒæŒ‚ä¸ªæœºæ¢°ç›˜(æç®€nas??)

## ä½¿ç”¨

é¡¹ç›®åœ°å€ï¼š[ã€æç®€äº‘ç›˜ã€‘](https://github.com/Apursuit/CloudPan)

æŠŠhtmlé‡Œçš„æ–‡ä»¶å¤åˆ¶åˆ°/var/www/htmlç›®å½•ä¸‹

åˆ›å»ºç›˜æ ¹ç›®å½•/var/www/panï¼Œå¦‚æœæŠŠå…¶ä»–ç›®å½•ä½œä¸ºç›˜æ ¹ç›®å½•ï¼Œåœ¨é…ç½®æ–‡ä»¶é‡Œä¿®æ”¹

æƒé™ç›¸å…³ï¼š

ç”±äºå¹¶ä¸ç†Ÿæ‚‰linuxæƒé™çŸ¥è¯†ï¼Œæˆ‘ç»™çš„æƒé™æ˜¯

```bash
chown -R www-data:www-data /var/www/pan
chmod -R 755 /var/www/pan
```
ç°åœ¨www-dataç”¨æˆ·å¯ä»¥è®¿é—®æ–‡ä»¶ï¼Œä¸Šä¼ æ–‡ä»¶ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹äº†

åœ¨ç›˜æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºimgï¼Œmp3ï¼Œvideoç­‰æ–‡ä»¶å¤¹ï¼Œå¦åˆ™åœ¨çº¿éŸ³ä¹ï¼Œåœ¨çº¿å›¾ç‰‡ï¼Œåœ¨çº¿è§†é¢‘åŠŸèƒ½æ— æ³•æ­£å¸¸ä½¿ç”¨

## åŠŸèƒ½

ç°åœ¨æœ‰ä»¥ä¸‹åŠŸèƒ½

- åœ¨çº¿ä¸‹è½½
- åˆ‡æ¢ä¸»é¢˜
- åœ¨çº¿æ’­æ”¾éŸ³ä¹
- åœ¨çº¿é¢„è§ˆå›¾ç‰‡
- è§†é¢‘åœ¨çº¿æ’­æ”¾

éœ€ç™»å½•ç®¡ç†å‘˜é€‚ç”¨ä»¥ä¸‹åŠŸèƒ½

- ç™»å½•éªŒè¯
- æ–‡ä»¶ä¸Šä¼ 
- æ–°å»ºæ–‡ä»¶å¤¹

åˆ é™¤æ–‡ä»¶åŠæ–‡ä»¶å¤¹åŠŸèƒ½æ²¡æœ‰å†™ï¼Œéœ€è¦ç®¡ç†å‘˜åœ¨æœåŠ¡ç«¯è‡ªè¡Œåˆ é™¤

## æ•ˆæœå›¾

æ¡Œé¢ç«¯æ•ˆæœå›¾

![é¦–é¡µ](https://the0n3.top/medias/cloudpan/index.png)

![ä¸»é¢˜](https://the0n3.top/medias/cloudpan/dark.png)

![ç™»å½•](https://the0n3.top/medias/cloudpan/login.png)

![åœ¨çº¿éŸ³ä¹](https://the0n3.top/medias/cloudpan/music.png)

![é¢„è§ˆå›¾ç‰‡](https://the0n3.top/medias/cloudpan/photos.png)

![åœ¨çº¿è§†é¢‘](https://the0n3.top/medias/cloudpan/video.png)

ç§»åŠ¨ç«¯æ•ˆæœå›¾

![é¦–é¡µ](https://the0n3.top/medias/cloudpan/index.jpg)

![åœ¨çº¿éŸ³ä¹](https://the0n3.top/medias/cloudpan/music.jpg)

![é¢„è§ˆå›¾ç‰‡](https://the0n3.top/medias/cloudpan/img.jpg)

![åœ¨çº¿è§†é¢‘](https://the0n3.top/medias/cloudpan/video.jpg)


## é…ç½®æ–‡ä»¶config.php

```php
<?php
# æ›´å¤šå›¾æ ‡ï¼Œè¯·è‡ªè¡Œåˆ°https://www.iconfinder.com/search/icons/related/7077519
$panTitle = "æç®€ç›˜";
$icons = [
    'txt' => 'icons/txt_icon.png',
    'php' => 'icons/php_icon.png',
    'java' => 'icons/java_icon.png',
    'mp4' => 'icons/mp4_icon.png',
    'xml' => 'icons/xml_icon.png',
    'pdf' => 'icons/pdf_icon.png',
    'doc' => 'icons/word_icon.png',
    'docx' => 'icons/word_icon.png',
    'mp3' => 'icons/mp3_icon.png',
    'png' => 'icons/png_icon.png',
    'jpg' => 'icons/jpg_icon.png',
    'md' => 'icons/md_icon.png',
    'zip' => 'icons/zip_icon.png',
    'html' => 'icons/html_icon.png',
    'folder' => 'icons/folder_icon.png',
];

# ç½‘ç›˜æ ¹ç›®å½•ï¼Œå»ºè®®ç»å¯¹è·¯å¾„ã€‚å¹¶ä¸”ä¸è¦æ”¾åœ¨webç›®å½•ä¸‹ï¼Œå¦åˆ™å¯èƒ½é€ æˆæ–‡ä»¶ä¸Šä¼ ç­‰æ¼æ´
# ç¦æ­¢webçˆ¶çº§ç›®å½•ç›´æ¥ä½œä¸ºæ ¹ç›®å½•
$panDir = "/var/www/pan";

# è·å–éŸ³ä¹ç›®å½•MP3ä¸‹çš„æ‰€æœ‰MP3æ–‡ä»¶
$musicDir = $panDir . '/mp3/';
# è·å–è§†é¢‘ç›®å½•videoä¸‹çš„æ‰€æœ‰è§†é¢‘æ–‡ä»¶
# æ­¤å¤„å–æ¶ˆæ³¨é‡Šä¼šæŠ¥é”™
# $videoDir = $panDir . '/video/';

# adminè¶…ç®¡è´¦å·ï¼Œé»˜è®¤admin passwordï¼Œçœ‹åˆ°è¿™é‡Œï¼Œè¯·æ‰‹åŠ¨ç”Ÿæˆä½ çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œæ¢ä¸ºmd5æ‘˜è¦ï¼Œä¸è¦æ˜æ–‡å­˜å‚¨
$username = "admin";
$password = "password";
$predefinedMd5Hash = md5($username.":".$password);

# é…ç½®phpå…è®¸ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å¤§å°
# php.iniç›¸å…³é…ç½®å·²é€šè¿‡user.iniè®¾ç½®ä¸Šé™ä¸º1GB

# é…ç½®nginxå…è®¸ä¸Šä¼ æ–‡ä»¶çš„æœ€å¤§å¤§å°
# éœ€è¦åœ¨nginxé…ç½®æ–‡ä»¶çš„serveræˆ–locationä¸­æ·»åŠ ä¸‹é¢é…ç½®ï¼Œä½¿èƒ½å¤Ÿä¸Šä¼ 1Må¤§å°ä»¥ä¸Šçš„æ–‡ä»¶
# nginxé…ç½®æ–‡ä»¶å¸¸è§ä½ç½®ï¼š/etc/nginx/sites-available/default
# client_max_body_size 1024M;

# è·¯å¾„å¤„ç†
$dir = isset($_GET['dir']) ? urldecode($_GET['dir']) : '';
$fullPath = realpath($panDir . '/' . $dir);

if ($fullPath === false || strpos($fullPath, $panDir) !== 0) {
    $rootDir = $panDir;
} else {
    $rootDir = $fullPath;
}
```

## æ ·å¼

æ‰€æœ‰æ ·å¼éƒ½å †åœ¨äº†styles/index.cssé‡Œï¼Œä¾æ‰˜çŸ³å±±ã€‚æœ‰...æœ‰å…´è¶£å¯ä»¥è¯•ç€ä¿®æ”¹ã€‚

## æ›´æ–°æ—¥å¿—

- 2024-09-02ï¼šå»é™¤åœ¨çº¿è§†é¢‘éœ€è¦ç™»å½•çš„é™åˆ¶ã€‚å‘å¸ƒv1.0.0ç‰ˆæœ¬ï¼ŒåŠŸèƒ½åŸºç¡€çš„ç½‘ç›˜ï¼Œæ»¡è¶³åœ¨çº¿å½±éŸ³
- 2024-09-01ï¼šä¿®å¤å­ç›®å½•æ–‡ä»¶æ— æ³•ä¸‹è½½
- 2024-08-30ï¼šæ·»åŠ .user.iniæ–‡ä»¶ï¼Œå…é™¤æ‰‹åŠ¨ä¿®æ”¹php.iniçš„éº»çƒ¦
- 2024-08-30ï¼šä¸Šä¼ åŠŸèƒ½ï¼Œç™»å½•åŠŸèƒ½ï¼Œè§†é¢‘æ’­æ”¾åŠŸèƒ½ï¼ŒéŸ³ä¹æ’­æ”¾åŠŸèƒ½ï¼Œå›¾ç‰‡é¢„è§ˆåŠŸèƒ½ï¼Œç®¡ç†å‘˜åŠŸèƒ½